<div class="manage-stories-container">
  <!-- Header with Search and Filters -->
  <div class="stories-header">
    <div class="header-left">
      <div class="story-stats">
        <span class="stat-item">Total: {{ successStories.length }}</span>
      </div>
    </div>
  </div>

  <div class="stories-content" [class.has-selected]="selectedStoryId">
    <!-- Stories List -->
    <div class="stories-list">
      <div
        *ngFor="let story of successStories"
        class="story-card"
        [class.selected]="selectedStoryId === story.id"
        (click)="selectStory(story.id)"
      >
        <div class="story-avatar">
          {{ story.initials }}
        </div>
        <div class="story-info">
          <div class="story-header">
            <h3 class="story-name">{{ story.name }}</h3>
          </div>
          <p class="course-name">{{ story.courseName }}</p>
          <div class="story-meta">
            <span class="meta-item">
              <span class="material-icons">calendar_today</span>
              {{ story.submissionDate | date : "shortDate" }}
            </span>
          </div>
        </div>
        <div class="story-actions">
          <button
            class="action-btn accept-btn"
            (click)="$event.stopPropagation(); acceptStory(story.id, $event)"
            title="Accept Story"
          >
            <span class="material-icons">check</span>
          </button>
          <button
            class="action-btn reject-btn"
            (click)="$event.stopPropagation(); rejectStory(story.id, $event)"
            title="Reject Story"
          >
            <span class="material-icons">close</span>
          </button>
        </div>
      </div>

      <div *ngIf="successStories.length === 0" class="no-stories">
        <span class="material-icons">article</span>
        <p>No success stories found</p>
      </div>
    </div>

    <!-- Story Details Panel -->
    <div *ngIf="getSelectedStory() as selectedStory" class="story-details">
      <div class="details-header">
        <h3>Success Story Details</h3>
        <button class="close-btn" (click)="closePanel()">
          <span class="material-icons">close</span>
        </button>
      </div>

      <div class="details-content">
        <!-- Story Profile Section -->
        <div class="details-section">
          <div class="profile-header">
            <div class="profile-avatar large">
              {{ selectedStory.initials }}
            </div>
            <div class="profile-info">
              <h2>{{ selectedStory.name }}</h2>
              <p class="profile-course">{{ selectedStory.courseName }}</p>
            </div>
          </div>
        </div>

        <!-- Course Information -->
        <div class="details-section">
          <h4>Course Information</h4>
          <div class="info-grid">
            <div class="info-item">
              <span class="material-icons">school</span>
              <div>
                <label>Course</label>
                <p>{{ selectedStory.courseName }}</p>
              </div>
            </div>
            <div class="info-item">
              <span class="material-icons">group</span>
              <div>
                <label>Batch</label>
                <p>{{ selectedStory.batchNo }}</p>
              </div>
            </div>
            <div class="info-item">
              <span class="material-icons">calendar_today</span>
              <div>
                <label>Submitted</label>
                <p>{{ selectedStory.submissionDate | date : "mediumDate" }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Success Story Content -->
        <div class="details-section story-section">
          <h4>Success Story</h4>
          <div class="story-content">
            <p class="story-text">{{ selectedStory.storyDescription }}</p>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="details-actions">
          <button
            class="btn btn-success"
            (click)="acceptStory(selectedStory.id, $event)"
          >
            Accept Story
          </button>
          <button
            class="btn btn-danger"
            (click)="rejectStory(selectedStory.id, $event)"
          >
            Reject Story
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
